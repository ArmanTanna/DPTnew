@{
    ViewBag.Title = "VarCompanies";
}

@section Scripts {
    <script src="~/Scripts/jquery-1.12.0.min.js"></script>
    <script src="~/Scripts/Chart.min.js"></script>

    @*<canvas id="myLineChart"></canvas>*@

    <script type="text/javascript">
        var data = JSON.parse(atob('@ViewBag.Data'));
        $(document).ready(function () {
            
            var labels = [], values = [];
            for (var i = 0; i < data.length; i++) {
                labels.push(data[i].split("-")[0].substring(0, data[i].length - 1));
                values.push(parseInt(data[i].split("-")[1]));
            }

            var tempData = {
                labels: labels,
                datasets: [{
                    label: "Companies",
                    fillColor: "rgba(151,187,205,0.2)",
                    strokeColor: "rgba(151,187,205,1)",
                    pointColor: "rgba(151,187,205,1)",
                    pointStrokeColor: "#fff",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(151,187,205,1)",
                    data: values
                }]
            };

            // Get the context of the canvas element we want to select
            var ctx = document.getElementById("myChart").getContext("2d");
            ctx.canvas.height = 150;
            // Instantiate a new chart
            var myLineChart = new Chart(ctx, {
                type: "bar",
                data: tempData,
            });
        })
    </script>
<div style="position:absolute; top:50%; left:10%; width:80%; height:200px;">
    <canvas id="myChart"></canvas>
</div>

}