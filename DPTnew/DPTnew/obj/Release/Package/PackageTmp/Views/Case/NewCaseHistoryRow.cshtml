@model DPTnew.Models.UpdateCase
@{
    ViewBag.Title = "Case Management";
}

@section Scripts {
    <script type="text/javascript">

        $('form').one('submit', function () {
            $(this).find('button[type="submit"]').attr('disabled', 'disabled');
            setTimeout(function () {
                $(this).find('button[type="submit"]').attr('disabled', 'disabled');
            }, 2000);

            if ($("#file").val() !== "" && $("#file").val() !== null) {
                var fileName = escape($("#file").val().split("\\")[$("#file").val().split("\\").length - 1]);
                $("#fileName").val(fileName);
            }
            var desc = escape($("#Description").val());
            $("#Description").val(desc);
            var det = escape($("#Details").val());
            $("#Details").val(det);
        });

        $(document).ready(function () {
        });
    </script>
}

@using (Html.BeginForm("Update", "Case", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="editor-label" style="font-size: 1.2em;">
        @Html.LabelFor(model => model.CaseId)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.CaseId, new { @readonly = "readonly" })
    </div>

    <div class="editor-label" style="font-size: 1.2em;">
        @Html.LabelFor(model => model.Description)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.Description, new { cols = "350", rows = "1"@*, required = "required"*@ })
    </div>

    <div class="editor-label" style="font-size: 1.2em;">
        @Html.LabelFor(model => model.Details)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.Details, new { cols = "350", rows = "5"@*, required = "required"*@ })
    </div>

    <div class="editor-field">
        @Html.TextBoxFor(model => model.fileName, new { @hidden = "hidden" })
    </div>

    <input type="file" name="file" id="file" />

    <div>
        <input type="submit" name="submitButton" value="Submit" />

        <input type="submit" name="submitButton" value="Cancel" />
    </div>

    @*<input type="submit" value="submit" />

    <p><a href="javascript:window.open('','_self').close();"><input type="submit" value="Cancel" /></a></p>*@
}
