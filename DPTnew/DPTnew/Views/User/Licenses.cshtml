@model DPTnew.Models.LicenseView

@{
    ViewBag.Title = "Index";
}


@section Scripts {

    <script type="text/javascript">

        var yourApp = yourApp || {};
        yourApp.Urls = yourApp.Urls || {};
        yourApp.Urls.baseUrl = '@Url.Content("~")';
        yourApp.Urls.exportUrl = '@Url.Action("Export", "User")';
        yourApp.Urls.createUrl = '@Url.Action("Create", "User")';
        yourApp.Urls.validateUrl = '@Url.Action("Validate", "User")';
        yourApp.Urls.licenseStateUrl = '@Url.Action("StateByLicenceId", "License")';
        yourApp.Urls.Upgrade = '@Url.Action("UpgradeLicense", "User")';

    </script>
    <link href="~/Content/jquery-ui.min.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-ui.min.js"></script>
    <script src="~/Scripts/License/table_list_buttons.js"> </script>
    <script type="text/javascript">
        $(document).ready(function () {
            loadLicenseTable({ data: JSON.parse(atob("@ViewBag.Licenses")) }, true, false,
                ["@DPTnew.Localization.Resource.ButtonExport", "@DPTnew.Localization.Resource.ButtonValidateExport",
                    "@DPTnew.Localization.Resource.ButtonInstall2015", "@DPTnew.Localization.Resource.ButtonInstallMin2015",
                    "@DPTnew.Localization.Resource.ButtonPasswordMin2015", "@DPTnew.Localization.Resource.ChangeVersion",
                    "@DPTnew.Localization.Resource.ButtonDecryptPwd", "@DPTnew.Localization.Resource.Modify", "@DPTnew.Localization.Resource.ButtonUpgrade"],
                    ["@DPTnew.Localization.Resource.Previous", "@DPTnew.Localization.Resource.Next", "@DPTnew.Localization.Resource.Search",
                     "@DPTnew.Localization.Resource.lengthmenu", "@DPTnew.Localization.Resource.info", "@DPTnew.Localization.Resource.infofiltered",
                     "@DPTnew.Localization.Resource.rowsSelected", "@DPTnew.Localization.Resource.noRowsSelected"]);
        });
    </script>
}


<p>
    <b>@Html.DisplayNameFor(model => model.AccountNumber): </b>@ViewBag.AccountNumber
</p>
<p>
    <b>@Html.DisplayNameFor(model => model.AccountName): </b>@ViewBag.AccountName
</p>
<table id="licenses" class="display" cellspacing="0" width="100%">
    <thead>
        <tr>
            <th></th>
            <th>
                @Html.DisplayNameFor(model => model.LicenseID)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ProductName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ArticleDetail)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Quantity)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.LicenseType)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.MachineID)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.MaintEndDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Version)
            </th>


            @*<th>
                    @Html.DisplayNameFor(model => model.Ancestor)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.StartDate)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.EndDate)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.MaintStartDate)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.LicenseKind)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Note)
                </th>*@
        </tr>
    </thead>
    @*<tbody>
        @foreach (var item in Model) {
            <tr>
                <td></td>
                <td>
                    @Html.DisplayFor(modelItem => item.LicenseID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ProductName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ArticleDetail)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Quantity)
                </td>
                <td>
                     @if (item.LicenseType == "local")
                {
                     <text>L</text>
                     }
                else {
                     <text>F</text>
                     }
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.MachineID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Ancestor)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.StartDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.EndDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.MaintStartDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.MaintEndDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Version)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LicenseKind)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Note)
                </td>

            </tr>
        }
        </tbody>*@
</table>
<div id="machineid-dialog" title="Please enter your machineid" style="display:none;">
    <input id="machineid" required="required" type="text" size="8" maxlength="8" />
</div>
<div id="password-dialog" title="Please enter your password" style="display: none;">
    <input id="pwd" required="required" type="text" />
</div>
<div id="floating-dialog" title="Please enter the info's:" style="display:none;">
    Machine ID: <input id="machineidf" name="macid" required="required" type="text" size="8" maxlength="8" />
    Vendor String: <input id="vendstring" name="vString" required="required" type="text" />
    Flex type:<select id="flexType-choice">
        <option value="0">Feature</option>
        <option value="1">Increment</option>
    </select>
</div>
<div id="decrypt-dialog" title="Password info's (Local Version < 2015):" style="display:none;">
    <label for="machineidp">Machine ID: </label> <input id="machineidp" type="text" readonly />
    <label for="ancestor">Ancestor MID: </label> <input id="ancestor" type="text" readonly />
    <label for="expdate">Expiry Date: </label> <input id="expdate" type="text" readonly />
    <label for="product">Product: </label> <input id="product" type="text" readonly />
    <label for="resdays">Res Days: </label> <input id="resdays" type="text" readonly />
    <label for="version">Version: </label> <input id="version" type="text" readonly />
</div>
<div id="pwd-dialog" title="Your requested password is" style="display: none;">
    <strong style="position: absolute; margin-top: 20px;" id="password"></strong>
</div>
<div id="version-dialog" title="Select Version" style="display: none;">
    <strong style="position: absolute; margin-top: 20px;" id="year"></strong>
    <select id="version-choice">
        <option value="2008">2008</option>
        <option value="2009">2009</option>
        <option value="2011">2011</option>
        <option value="2012">2012</option>
        <option value="2013">2013</option>
        <option value="2014">2014</option>
    </select>
</div>
<div id="upgrade-dialog" title="Select Version" style="display: none;">
    <strong style="position: absolute; margin-top: 20px;" id="upgver"></strong>
    <select id="upgrade-choice">
        <option value="2016">2016</option>
    </select>
</div>
<div id="sysmsg-dialog" title="System message" style="display:none;">
    <strong style="position:absolute; margin-top:20px;" id="msg"></strong>
</div>
